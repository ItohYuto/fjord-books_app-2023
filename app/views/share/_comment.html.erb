<div class="show-item">
  <h3><%= t('views.common.title_index', name: Comment.model_name.human) %></h3>
  <% if !commentable.comments.empty? %>
    <% commentable.comments.order(:created_at).includes(:user).each do |comment| %>
      <div class="comment-box">
        <p>
          <%= comment.user.name %>さん
        </p>
        <p>
          <%= comment.content %>
        </p>
        <p class="comment_created_at">
          <%= Comment.human_attribute_name(:created_at) %>:
          <%= l comment.created_at, format: :long %>
        </p>
        <% if comment.user == current_user %>
          <%= button_to t('views.common.destroy', name: Comment.model_name.human.downcase), comment, method: :delete %>
        <% end %>
      </div>
    <% end %>
  <% else %>
    <p>
      <%= t 'views.common.does_not_exist', name: Comment.model_name.human %>
    </p>
  <% end %>
</div>
<div class="show-item">
  <h3><%= t('views.common.title_add', name: Comment.model_name.human) %></h3>
  <%= form_with(model: [ commentable, Comment.new ]) do |form| %>
    <% if commentable.errors.any? %>
      <div style="color: red">
        <h2><%= t('views.common.validation_error', errors: i18n_error_count(comment.errors.count), name: Comment.model_name.human.downcase) %>:</h2>
        <ul>
          <% commentable.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div>
      <%= form.label :content, style: "display: block" %>
      <%= form.text_field :content %>
    </div>
    <div>
      <%= form.submit %>
    </div>
  <% end %>
</div>
